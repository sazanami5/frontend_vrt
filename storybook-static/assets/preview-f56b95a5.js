function w(t){if(!t.viewports)return t;const{viewports:e}=t,r={...t};delete r.viewports;const o=Array.isArray(e)?e:Object.keys(e);if(!o.length)return t;const i=n=>Array.isArray(e)?n:e[n],s={...t.variants};return o.slice(1).forEach(n=>s[n]={viewport:i(n)}),r.viewport=i(o[0]),r.variants=s,o.length>1&&(r.defaultVariantSuffix=o[0]),r}function a(t,e){const r=Object.assign({},t,e);return!t.viewport||typeof t.viewport=="string"?e.viewport&&(r.viewport=e.viewport):e.viewport&&(typeof e.viewport=="object"?r.viewport={...t.viewport,...e.viewport}:r.viewport=e.viewport),t.variants&&(r.variants=a(t.variants,e.variants||{})),r}function v(t,e){if(e.isDefault)return t;const r=Object.assign({},t),o=r.variants||{};delete r.variants;const i=e.keys[0]&&e.keys[0]===t.defaultVariantSuffix?1:0;return e.keys.slice(i).reduce((s,n)=>a(s,o[n]),r)}function u(t){const e=window;if(e.emitCapture)return t(e)}function p(t){const{searchParams:e}=new URL(t),r=e.get("id"),o=e.get("selectedKind"),i=e.get("selectedStory");if(r)return r;if(o&&i)return`${o}/${i}`;throw new Error}function h(t=0){return new Promise(e=>setTimeout(e,t))}function S(t){if(!t)return Promise.resolve();if(typeof t=="string"){const e=window[t];return typeof e!="function"?Promise.resolve():Promise.resolve().then(()=>e())}else return typeof t=="function"?t():Promise.resolve()}function O(t){return new Promise(e=>t.requestIdleCallback(e,{timeout:3e3}))}function y(t,e,r){e&&(t.optionStore||(t.optionStore={}),t.optionStore[e]||(t.optionStore[e]=[]),t.optionStore[e].push(r))}function m(t,e){if(!t.optionStore||!t.optionStore[e])return null;const r=t.optionStore[e];return delete t.optionStore[e],r}function g(t={},e){let r;e&&e.id?r=e.id:e&&e.story&&e.kind?r=e.kind+"/"+e.story:r=p(location.href),u(o=>y(o,r,t))}function k(){u(async t=>{await t.waitBrowserMetricsStable();const[e,r]=await Promise.all([t.getBaseScreenshotOptions(),t.getCurrentVariantKey()]),o=p(location.href),i=m(t,o);if(!i)return;const s=i.reduce((l,d)=>a(l,w(d)),e),n=v(s,r);if(n.skip)return t.emitCapture(n,o);await h(n.delay),await S(n.waitFor),await O(t),await t.emitCapture(n,o)})}function f(t,e){g(t,e),Promise.resolve().then(k)}const{makeDecorator:c}=__STORYBOOK_MODULE_ADDONS__,D=c&&c({name:"withScreenshot",parameterName:"screenshot",skipIfNoParametersOrOptions:!1,allowDeprecatedUsage:!0,wrapper:(t,e,{parameters:r,options:o})=>(typeof process<"u"&&(process==null?void 0:{}.JEST_WORKER_ID)!==void 0||f(r||o,e),t(e))});function P(t={}){return(e,r)=>{const o=i=>(f(t,i),e(i));return r?o(r):i=>o(i)}}const _=D||P,A={parameters:{actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/i}}}},C=[_];export{C as decorators,A as default};
//# sourceMappingURL=preview-f56b95a5.js.map
